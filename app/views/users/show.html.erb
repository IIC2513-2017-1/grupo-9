
<div class="user-header">
    <h1> <%=@user.first_name%>'s profile </h1>
</div>
<section id="profile">
  <div class="profile-image">
    <%if @user.photo.blank? %>
      <%= image_tag("/images/placeholder-user.png", :size => "300x300") %>
    <% else %>
      <%= image_tag @user.photo.url, :size => "300x300" %>
    <% end %>
  </div>
  <div class="profile-information">
    <p> First name: <%= @user.first_name %> </p>
    <p> Last name: <%= @user.last_name %> </p>
    <p> Email: <%= @user.email %> </p>
    <p> Sex: <%= @user.sex %> </p>
    <p> Birth date: <%= @user.birth_date %> </p>
    <p> Description: <%= @user.description %> </p>
  </div>
</section>

<% if is_valid(@user.id) %>
<div class="user-action" id="user-edit">
  <h4> <%= link_to 'Edit information', edit_user_path(@user.id) %> </h4>
</div>
<div class="user-action" id="user-delete">
  <h4> <%= link_to 'Delete user',@user, method: :delete, data: { confirm: "Are you sure?" } %> </h4>
</div>
<% end %>


<section class="profile-projects">
    <div class="user-header">
        <h3>Projects created by <%= @user.first_name %>  </h3>
    </div>

    <% if @user.projects.count == 0 %>
      <div class="user-header">
        <p> There are no projects <p>
      </div>
    <% else %>
      <%= render :partial =>'projects/project', :object =>{:projects => @user.projects} %>
    <% end %>

  </div>



</section>

<section>
  <div class="user-header">
    <h3>Investments made by <%= @user.first_name %>  </h3>
  </div>

    <% if @user.investments.count == 0 %>
    <div class="user-header">
        <p> There are no investments<p>
    </div>
    <% else %>
    <div class="table">
    <table class="user-table">
      <tr class="user-table-row">
        <th class="user-table-header">Project</th>
        <th class="user-table-header">Amount</th>
        <% if is_valid(@user.id) %>
        <th class="user-table-header">Edit</th>
        <th class="user-table-header">Delete</th>
        <% end %>
      </tr>
        <% @user.investments.each do |x| %>
        <tr class="user-table-row">
          <td class="user-table-data">  <%= link_to Project.find(x.project_id).name, Project.find(x.project_id) %> </td>
          <td class="user-table-data">  <%= x.amount %> </td>
          <% if is_valid(@user.id) %>
            <td class="user-table-data"> <%= link_to 'Edit',edit_investment_path(x.id) %> </td>
            <td class="user-table-data"> <%= link_to 'Delete',delete_investment_path(x.id), method: :delete, data: { confirm: "Are you sure?" } %> </td>
          <% end %>
        </tr>
        <% end %>
      </table>
    <% end %>
    <div>
</section>

<section>
  <div <div class="user-header">
    <h3>Comments made by <%= @user.first_name %>  </h3>
  </div>
  <% if @user.comments.count == 0 %>
    <div class="user-header">
      <p> There are no comments <p>
    <div>
  <% else %>
  <div class="table">
  <table class="user-table">
    <tr class="user-table-row">
      <th class="user-table-header">Project</th>
      <th class="user-table-header">Content</th>
    </tr>
    <% @user.comments.each do |x| %>
    <tr class="user-table-row">
      <td class="user-table-data">  <%= link_to Project.find(x.project_id).name, Project.find(x.project_id) %> </td>
      <td class="user-table-data"> <%= x.content %> </td>
      <% end %>
    </table>
  <div>

</section>



<% end %>
